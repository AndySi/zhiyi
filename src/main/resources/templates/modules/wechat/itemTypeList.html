<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="UTF-8">
    <title>商品列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/plugins/ztree/css/metroStyle/metroStyle.css}">
    <link rel="stylesheet" th:href="@{/plugins/layui/css/layui.css}" media="all">
    <link rel="stylesheet" th:href="@{/css/comm.css}">
    <script th:src="@{/libs/jquery.min.js}"></script>
    <script th:src="@{/plugins/layer/layer.js}"></script>
    <script th:src="@{/libs/vue.min.js}"></script>
    <script th:src="@{/plugins/ztree/jquery.ztree.all.min.js}"></script>
    <script th:src="@{/js/common.js}"></script>
    <style>
        .layui-form-label {
            width: 110px;
        }

        .d-content .layui-input {
            width: 94%;
        }
    </style>
</head>
<body>
<section class="layui-app-box" style="width: 97%;">
    <div id="vApp" v-cloak>
        <div v-show="showEle">
            <form class="layui-form" action="javascript:;">
                <div class="layui-form-item">
                    <div class="layui-input-inline">
                        <input type="text" v-model="q.name" placeholder="分类名称" autocomplete="off"
                               class="layui-input">
                    </div>
                    <button class="layui-btn" data-type="reload"><i class="fa fa-search"></i>&nbsp;查询</button>
                    <button shiro:hasPermission="wx:itemtype:add" class="layui-btn layui-btn-normal" data-type="add"><i
                            class="fa fa-plus"></i>&nbsp;新增
                    </button>
                    <button shiro:hasPermission="wx:itemtype:update" class="layui-btn layui-btn-warm"
                            data-type="update">
                        <i class="fa fa-pencil-square-o"></i>&nbsp;修改
                    </button>
                    <button shiro:hasPermission="wx:itemtype:delete" class="layui-btn layui-btn-danger"
                            data-type="delete">
                        <i class="fa fa-trash-o"></i>&nbsp;删除
                    </button>
                </div>
            </form>
            <table id="layui-grid" class="layui-table" lay-filter="lf-credit"></table>
        </div>
        <!-- 新增修改页面 -->
        <div v-show="!showEle">
            <fieldset class="layui-elem-field layui-field-title">
                <legend>{{title}}</legend>
            </fieldset>
            <div class="d-content">
                <form class="layui-form" action="javascript:;">
                    <div class="layui-form-item">
                        <label class="layui-form-label">分类名称</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" autocomplete="off" class="layui-input"
                                   v-model="itemType.name">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">上级分类</label>
                        <div class="layui-input-inline">
                            <input type="text" lay-verify="required" class="layui-input"
                                   v-model="itemType.parentName" style="cursor:pointer;" readonly="readonly"
                                   @click="getTreeBox" placeholder="一级分类">
                        </div>
                        <div class="layui-form-mid layui-word-aux">默认一级分类</div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button class="layui-btn" lay-submit="" lay-filter="btn-ok">确定</button>
                            <button class="layui-btn layui-btn-warm" data-type="goback">返回</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<!-- 选择类型 -->
<div id="treeLayer" style="display: none;padding:10px;">
    <ul id="typeTree" class="ztree"></ul>
</div>
<!-- 详情模板页 -->
<script type="text/html" id="detailTpl">
    <div class="d-detail-view" style="padding: 10px;">
        <form class="layui-form" action="javascript:;">
            <div class="layui-form-item">
                <label class="layui-form-label">商品类型</label>
                <div class="layui-form-mid layui-word-aux">{{ d.typeName }}</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">商品名称</label>
                <div class="layui-form-mid layui-word-aux">{{ d.name }}</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">商品描述</label>
                <div class="layui-form-mid layui-word-aux">{{ d.describe }}</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">商品图片</label>
                <div class="layui-input-block"><img src="{{ d.coverUrl }}" height="100%" width="100%"></div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label" style="width: 110px;">SPU销量</label>
                <div class="layui-form-mid layui-word-aux">{{ d.spusaleNum }}</div>
            </div>
        </form>
    </div>
</script>
<script th:src="@{/plugins/layui/layui.js}" charset="utf-8"></script>
<script th:src="@{/js/modules/wechat/itemTypeList.js}"></script>
</body>
</html>