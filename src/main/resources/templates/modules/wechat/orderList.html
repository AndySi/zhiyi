<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/plugins/layui/css/layui.css}" media="all">
    <link rel="stylesheet" th:href="@{/css/comm.css}">
    <script src="https://cdn.bootcss.com/sockjs-client/1.1.4/sockjs.min.js"></script>
    <script src="https://cdn.bootcss.com/stomp.js/2.3.3/stomp.min.js"></script>
    <script th:src="@{/libs/jquery.min.js}"></script>
    <script th:src="@{/plugins/layer/layer.js}"></script>
    <script th:src="@{/libs/vue.min.js}"></script>
    <script th:src="@{/js/common.js}"></script>
</head>
<body>
<noscript><h2 style="color: #ff0000">貌似你的浏览器不支持websocket</h2></noscript>
<section class="layui-app-box" style="width: 97%;">
    <div id="vApp" v-cloak>
        <div v-show="showEle">
            <form class="layui-form" action="javascript:;">
                <div class="layui-form-item">
                    <div class="layui-input-inline">
                        <input type="text" v-model="q.orderNo" placeholder="订单号" autocomplete="off"
                               class="layui-input">
                    </div>
                    <label class="layui-form-label">订单状态</label>
                    <div class="layui-input-inline">
                        <select lay-filter="lf-orderState">
                            <option value="" selected="">请选择</option>
                            <option value="0">未支付</option>
                            <option value="1">已支付未发货</option>
                            <option value="2">已支付已发货</option>
                            <option value="3">已签收</option>
                            <option value="4">拒签</option>
                        </select>
                    </div>
                    <button class="layui-btn" data-type="reload"><i class="fa fa-search"></i>&nbsp;查询</button>
                    <button shiro:hasPermission="wx:order:update" class="layui-btn layui-btn-warm" data-type="update">
                        <i class="fa fa-pencil-square-o"></i>&nbsp;修改
                    </button>
                </div>
            </form>
            <table id="layui-grid" class="layui-table" lay-filter="lf-order"></table>
        </div>
        <div v-show="!showEle">
            <fieldset class="layui-elem-field layui-field-title">
                <legend>修改</legend>
            </fieldset>
            <div class="d-content">
                <form class="layui-form" action="javascript:;">
                    <div class="layui-form-item">
                        <label class="layui-form-label">订单数量</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="lvNum" autocomplete="off" class="layui-input"
                                   v-model="orderInfo.orderNum">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">收货人</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" class="layui-input"
                                   v-model="orderInfo.receiver">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">收货人电话</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="required" class="layui-input"
                                   v-model="orderInfo.tel">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">订单金额</label>
                        <div class="layui-input-block">
                            <input type="text" lay-verify="lvPrice" class="layui-input"
                                   v-model="orderInfo.orderMoney">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button class="layui-btn" lay-submit="" lay-filter="btn-ok">确定</button>
                            <button class="layui-btn layui-btn-warm" data-type="goback">返回</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<!-- 状态解析 -->
<script type="text/html" id="stateTpl">
    {{#  if(d.orderState === 0){ }}
    <span style="color: #FFB800;">未支付</span>
    {{#  } else if(d.orderState === 1){ }}
    <span style="color: #FFB800;">已支付未发货</span>
    {{#  } else if(d.orderState === 2){ }}
    <span style="color: #FFB800;">已支付已发货</span>
    {{#  } else if(d.orderState === 3){ }}
    <span style="color: #009688;">已签收</span>
    {{#  } else if(d.orderState === 4){ }}
    <span style="color: #FF5722;">拒签</span>
    {{#  } }}
</script>
<script id="payTypeTpl" type="text/html">
    {{#  if(d.payType === 0){ }}
    微信
    {{#  } else { }}
    ''
    {{#  } }}
</script>
<script th:src="@{/plugins/layui/layui.js}" charset="utf-8"></script>
<script th:src="@{/js/modules/wechat/orderList.js}"></script>
</body>
</html>